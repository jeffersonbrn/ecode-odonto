CREATE TABLE cliente(
	id bigserial PRIMARY KEY,
	nome varchar(50) NOT NULL, 
	sigla varchar(20) UNIQUE NOT null
);

CREATE TABLE instrumento(
	id bigserial PRIMARY KEY, 
	nome varchar(50) UNIQUE NOT null
);

CREATE TABLE aluno(
	id bigserial PRIMARY KEY, 
	curso_id bigint NOT NULL,
	matricula_id bigint UNIQUE NOT NULL,
	nomealuno varchar(80) NOT NULL,
	escaninho varchar(20) NULL,
	FOREIGN KEY (curso_id) REFERENCES curso(id)
);

create table movimentacao(
	id bigserial primary key,
	aluno_id bigint not null,
	dataentrada date null default current_date,
	horaentrada time null default current_time,
	datasaida date null,
	horasaida time null,
	escaninho varchar(20) null,
	observacao varchar(300) null,
	funcionario_entrada bigint not null,
	funcionario_saida bigint null,
	
	foreign key (aluno_id) references aluno(id)
);

create table itemmovimentacao(
	id bigserial primary key,
	movimentacao_id bigint not null,
	instrumento_id bigint not null,
	observacao varchar(300) null,
	
	foreign key (movimentacao_id) references movimentacao(id),
	foreign key (instrumento_id) references instrumento(id)
);

SHOW DATASTYLE;
SET dataestyle TO ISO, DMY;
SELECT * FROM venda